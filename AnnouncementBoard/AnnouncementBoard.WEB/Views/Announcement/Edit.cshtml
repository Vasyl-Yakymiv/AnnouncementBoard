@model AnnouncementBoard.WEB.Models.Announcement
@{
    ViewData["Title"] = "Редагувати оголошення";
}

<h2>Редагувати оголошення</h2>

<form asp-action="Edit" method="post">
    <input type="hidden" asp-for="Id" />

    <div class="form-group mb-3">
        <label asp-for="Title" class="form-label"></label>
        <input asp-for="Title" class="form-control" />
        <span asp-validation-for="Title" class="text-danger"></span>
    </div>

    <div class="form-group mb-3">
        <label asp-for="Description" class="form-label"></label>
        <textarea asp-for="Description" class="form-control"></textarea>
        <span asp-validation-for="Description" class="text-danger"></span>
    </div>

    <div class="form-group mb-3">
        <label asp-for="Status" class="form-label"></label>
        <select asp-for="Status" class="form-select">
            <option value="Active" selected="@Model.Status == " Active"">Активне</option>
            <option value="Inactive" selected="@Model.Status == " Inactive"">Неактивне</option>
        </select>
        <span asp-validation-for="Status" class="text-danger"></span>
    </div>

    <div class="form-group mb-3">
        <label asp-for="Category" class="form-label"></label>
        <select asp-for="Category" class="form-select" id="categorySelect" onchange="onCategoryChange()">
            <option value="">-- Виберіть категорію --</option>
            <option value="Побутова техніка" selected="@Model.Category == " Побутова техніка"">Побутова техніка</option>
            <option value="Комп'ютерна техніка" selected="@Model.Category == " Комп'ютерна техніка"">Комп'ютерна техніка</option>
            <option value="Смартфони" selected="@Model.Category == " Смартфони"">Смартфони</option>
            <option value="Інше" selected="@Model.Category == " Інше"">Інше</option>
        </select>
        <span asp-validation-for="Category" class="text-danger"></span>
    </div>

    <div class="form-group mb-3">
        <label asp-for="SubCategory" class="form-label"></label>
        <select asp-for="SubCategory" class="form-select" id="subCategorySelect">
            <option value="">-- Виберіть підкатегорію --</option>
        </select>
        <span asp-validation-for="SubCategory" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Зберегти</button>
    <a asp-action="Index" class="btn btn-secondary">Назад</a>
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        const subCategories = {
            "Побутова техніка": ["Холодильники", "Пральні машини", "Бойлери", "Печі", "Витяжки", "Мікрохвильові печі"],
            "Комп'ютерна техніка": ["ПК", "Ноутбуки", "Монітори", "Принтери", "Сканери"],
            "Смартфони": ["Android смартфони", "iOS/Apple смартфони"],
            "Інше": ["Одяг", "Взуття", "Аксесуари", "Спортивне обладнання", "Іграшки"]
        };

        function onCategoryChange() {
            const categorySelect = document.getElementById('categorySelect');
            const subCategorySelect = document.getElementById('subCategorySelect');
            const selectedCategory = categorySelect.value;

            subCategorySelect.innerHTML = '<option value="">-- Виберіть підкатегорію --</option>';

            if (selectedCategory && subCategories[selectedCategory]) {
                subCategories[selectedCategory].forEach(subCat => {
                    const option = document.createElement('option');
                    option.value = subCat;
                    option.text = subCat;
                    if (subCat === "@Model.SubCategory") {
                        option.selected = true;
                    }
                    subCategorySelect.appendChild(option);
                });
            }
        }
        document.addEventListener("DOMContentLoaded", function () {
            onCategoryChange();
        });
    </script>
}